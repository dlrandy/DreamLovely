# 设计模式之适配器模式

**适配器模式属于结构设计模式**

结构化设计模式是使用新对象(包装对象)来创建新功能

![markdown](https://images.unsplash.com/photo-1571766280138-1ba739fcc856?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2468&q=80 "
Kevin Mueller")

### 什么是适配器？
适配器也叫包装器，它是实现了刚需接口的一段代码。通常会包装实现类的一个私有拷贝，
并代理所有的调用到这个拷贝。

###适配器模式的作用？
使不兼容的接口能够兼容，这里的接口通常是不能够进行修改的。一般需要加一个额外的层
（新的对象或者类），来做一些修改使得接口之间能够进行通信。
>  通俗的讲，就是一个接口需要函数a，但是目前只有函数b，这时可以使用adaptor
  将函数b模拟为函数a。生活中的例子，插排。

### 适配器是如何工作的？
1. adapter有一个接口，兼容已有对象中的一个
2. 使用这个接口，已有的对象可以安全调用adapter的方法
3. 一旦接受到调用，adapter传递请求到第二个对象，但是
  以第二个对象接受的格式和顺序


###适配器分为class适配器和obejct适配器：
1.  class 适配器
		 - 继承被适配的class，然后暴露出用户可以使用的api(适合单继承的语言)
		- adaptor同时继承两个已经存在的class(适合可以多继承的语言)
	> 上述两种方法主要是要换掉已经存在的class。
	*类适配器在需要访问被适配类的保护属性或者方法的时候特别有用，但是在**JavaScript**里有一些局限性：*
	>
	1. 被适配的class 和目标class都要可继承
	2. 目标class是抽象类而不是纯接口的时候，在没有mixin的情况下，是不能使用同一个适配器类来继承被适配的class和目标class。
	3. 带有两组方法和属性的class容易让人迷惑
2.  object适配器
 		基于组合的原则，实现一个对象的接口同时包装另一个对象。这里的包装可以理解为将适配的对象作为一个依赖
>  js的class是单继承的，但是接口是可以多实现的

适配器模式的参与者一般有：
1. client是一个class，包含着已有的业务逻辑
2. client interface描述的其他想要使用client code的
  class必须遵循的协议
3. service 是不能够改变的class，client不能够直接使用
4. adapter是一个能够client和service都可以协作的class，
它实现client interface，同时包装service，接受client的请求
到service
5. client code不会和实体的adapter耦合
##什么时候使用适配器模式？
-  想使用一个已经存在的class/object，但是它的api
  不兼容当前的code
-  在想复用几个子类，这些子类因没有通用的方法，因此不能
被加到父类



## 如何实现适配器模式？
适配器模式需要两种因素：
1. 系统需要一个服务class，同时我们不能修改这个class
2. 使用该服务class的用户class，但是接口或者数据格式的不兼容

##具体思路
1. 分析用户需要什么样的interface ，以致于稍后创建adaptor class
2. 创建适配器class
	1. 设置属性存储不兼容的object (adaptee)
	2. 实现用户需要的接口
3. 使用adaptor class作为用户接口


##什么时候不需要使用适配模式？
1. 不需要复用已经存在的class或者对象；
1. 存在的class/对象可以修改

##优点
1.  单一职责，将interface或者数据转换和业务逻辑进行了分离
2.  开闭原则，引入新的适配器，不会破坏已经存在的code

##缺点
由于引入了额外的class/interface，增加了代码的整体复杂度

###和其他模式的关系
1.桥接模式是事先设计的，可以独立的开发App的一部分。适配器使用在已经存在的app里的
2.适配器改变了已经存在的接口，装饰器则是在不改变接口的情况下强化一个对象
  装饰器支持递归组合，适配器是不支持的
3.Facade是给已经存在的对象定义新的接口，适配器试着使得已经存在的接口可以使用。
  适配器只是包装一个对象，Facade则是针对对象的整个子系统
4.Bridge State Strategy都有相似的结构，某种程度上的Adaptor。这些模式都是
  基于组合的，把工作代理到其他的对象上。



![eberhard grossgasteiger](https://images.unsplash.com/photo-1574270981993-f1df213562b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80 "eberhard grossgasteiger")End
